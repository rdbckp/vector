name: Image to SVG Vector Pro

on:
  workflow_dispatch: # Tombol Manual Run di tab Actions

jobs:
  convert-process:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Cache Cargo Registry
        uses: actions/cache@v3
        with:
          path: ~/.cargo/registry
          key: ${{ runner.os }}-cargo-vtracer

      - name: Install Vtracer Tool
        run: cargo install vtracer

      - name: Create Directories
        run: mkdir -p output

      - name: Execute Vectorization
        # Penjelasan Parameter:
        # --mode spline: Bikin kurva/lekukan mulus (bezi√©r)
        # --path_precision 3: Akurasi titik koordinat garis
        # --filter_speckle 4: Hapus bintik/noise kecil ukuran < 4px
        # --corner_threshold 60: Biar sudut sayap nggak patah-patah
        run: |
          vtracer \
            --input input/image_b811fb.png \
            --output output/logo_vector.svg \
            --mode spline \
            --path_precision 3 \
            --corner_threshold 60 \
            --filter_speckle 4 \
            --color_precision 8

      - name: Upload SVG Result
        uses: actions/upload-artifact@v4
        with:
          name: logo-svg-result
          path: output/logo_vector.svg
