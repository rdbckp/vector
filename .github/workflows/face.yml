- name: Process Image to Pro Vector
        run: |
          curl -L "${{ github.event.inputs.image_url }}" -o "input_image"

          # TAHAP PRE-PROCESSING DEWA
          # 1. -adaptive-sharpen: Negesin garis tato & bass tanpa nambah noise
          # 2. -adaptive-blur: Mulusin area kulit biar gak pecah pas di-trace
          # 3. -contrast-stretch: Mastiin area item beneran "deep black"
          convert input_image \
                  -colorspace gray \
                  -adaptive-sharpen 0x2 \
                  -adaptive-blur 0x1 \
                  -contrast-stretch 2%x2% \
                  -level ${{ github.event.inputs.shadow_boost }}%,100% \
                  -posterize ${{ github.event.inputs.levels }} \
                  cooked.png

          # TAHAP TRACING (vtracer)
          # --mode spline: WAJIB, ini yang bikin garis melengkung cakep
          # --path_precision 2: Biar detail kecil kayak tato tetep dapet
          vtracer --input cooked.png \
                  --output result.svg \
                  --mode spline \
                  --colormode color \
                  --hierarchical cutout \
                  --filter_speckle 10 \
                  --color_precision 8 \
                  --path_precision 2 \
                  --corner_threshold 60
